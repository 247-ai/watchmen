!function(){"use strict";var e=angular.module("watchmenApp",["ngRoute","ngAnimate","angularSpinner","ngTable","angularMoment","watchmenControllers","watchmenServices"]);e.config(["$routeProvider",function(e){e.when("/details/:host/:service",{templateUrl:"partials/service-detail.html",controller:"ServiceDetailCtrl"}).otherwise({templateUrl:"partials/service-list.html",controller:"ServiceListCtrl"})}])}();
!function(){"use strict";function e(e,r){var t={page:1,count:r||10,debugMode:!0};return window.localStorage&&window.localStorage.getItem(e)?JSON.parse(window.localStorage.getItem(e)):t}function r(r,t,n,a,o){return new t(e(r,o),{total:n[r].length,getData:function(e,t){var o=n[r];t.total(o.length);var i=t.sorting()?a("orderBy")(o,t.orderBy()):o;e.resolve(i.slice((t.page()-1)*t.count(),t.page()*t.count()));var l={sorting:t.sorting(),count:t.count(),page:t.page()};window.localStorage&&window.localStorage.setItem(r,JSON.stringify(l))}})}var t,n=3e3,a=angular.module("watchmenControllers",[]);a.controller("ServiceListCtrl",["$scope","$filter","$timeout","Service","ngTableParams","usSpinnerService",function(e,a,o,i,l,s){s.spin("spinner-1");var c="tableServicesData";e[c]=[],e.tableParams=r(c,l,e,a,10),function g(e,r){function a(){o.cancel(t),t=o(function(){g(e,r)},n)}function i(r){e.errorLoadingServices="Error loading data from remote server",console.error(r),a()}s.stop("spinner-1"),e.services=r.query(function(r){e.servicesDown=r.filter(function(e){return e.data&&"error"===e.data.status}).length,e.errorLoadingServices=null,e[c]=r,e.tableParams.reload(),a()},i)}(e,i)}]),a.controller("ServiceDetailCtrl",["$scope","$filter","$routeParams","Service","ngTableParams","usSpinnerService",function(e,t,n,a,o,i){i.spin("spinner-1"),e.serviceDetails=a.get({serviceId:n.host+","+n.service},function(n){i.stop("spinner-1"),e.tableCriticalLogsData=n.critical_events,e.tableWarningLogsData=n.warning_events,e.tableCriticalLogs=r("tableCriticalLogsData",o,e,t,10),e.tableWarningLogs=r("tableWarningLogsData",o,e,t,10)})}])}();
!function(){"use strict";var e=angular.module("watchmenServices",["ngResource"]);e.factory("Service",["$resource",function(e){return e("services?host=:host&service=:service",{},{query:{method:"GET",isArray:!0}})}])}();