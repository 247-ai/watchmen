<div class="details-page">

    <a style="float:right" href="/" class="btn btn-default">
        <span class="glyphicon glyphicon-chevron-left"></span> back to list
    </a>

    <h2>{{serviceDetails.service.host.name}}
        <a target="_blank" href="{{serviceDetails.service.host.host}}:{{serviceDetails.service.host.port}}">
            {{serviceDetails.service.host.host}} (port {{serviceDetails.service.host.port}})
        </a>
    </h2>


    <div class="section status row">

        <div class="col-md-6">

            <h1 class="uptime">
                <span ng-if="!serviceDetails.service.enabled" title="Disabled" class="label label-default">Service disabled</span>

                <span ng-if="serviceDetails.service.data && serviceDetails.service.data.uptime"
                      title="Up time: {{serviceDetails.service.data.uptime}} %"
                      ng-class="{'label label-success':serviceDetails.status=='success','label label-danger':serviceDetails.status=='error','label label-default':!serviceDetails.status}">

                    {{serviceDetails.service.data.uptime}} % uptime
                </span>

                <span ng-if="serviceDetails.service.enabled && (!serviceDetails.service.data || !serviceDetails.service.data.uptime)" title="Offline" class="label label-danger">Offline</span>
            </h1>

            <br/>
            <!--<div ng-if="serviceDetails.service.data && serviceDetails.service.data.up_since">-->
                <!--<span class="text-muted small">uptime (since {{serviceDetails.service.data.up_since}}): </span>-->
                <!--<span am-time-ago="serviceDetails.service.data.up_since"></span>-->
            <!--</div>-->

            <table class="general">
                <tr ng-if="serviceDetails.service.data && serviceDetails.service.data.avg_response_time">
                    <td>AVG. latency</td>
                    <td>
                        <span title="AVG response time: {{serviceDetails.service.data.avg_response_time}} milliseconds" class="label label-default">
                            {{serviceDetails.service.data.avg_response_time}}
                        </span>
                        <span class="text-muted small">milliseconds</span>
                    </td>
                </tr>
                <tr ng-if="serviceDetails.service.data && serviceDetails.service.data.outages">
                    <td>
                        Outages
                    </td>
                    <td>
                        <span title="outages: {{serviceDetails.service.data.outages}}" class="label label-danger">{{serviceDetails.service.data.outages}}</span>
                        <span ng-if="serviceDetails.service.data && serviceDetails.service.data.last_outage" class="text-muted small">
                        (last one was
                            <span am-time-ago="serviceDetails.service.data.last_outage"></span>)
                        </span>
                    </td>
                </tr>
                <tr ng-if="serviceDetails.service.data && serviceDetails.service.data.warnings">
                    <td>Warnings</td>
                    <td>
                        <span title="warnings: {{serviceDetails.service.data.warnings}}" class="label label-warning">{{serviceDetails.service.data.warnings}}</span>
                        <span ng-if="serviceDetails.service.data && serviceDetails.service.data.last_warning" class="text-muted small">
                        (last one was <span am-time-ago="serviceDetails.service.data.last_warning"></span>)
                        </span>
                    </td>
                </tr>
            </table>

        </div>

        <div class="col-md-6">

            <h4>Configuration</h4>

            <table class="general">
                <tr>
                    <td>Ping interval:</td>
                    <td><em>{{serviceDetails.service.host.ping_interval}}</em> seconds</td>
                </tr>
                <tr ng-if="serviceDetails.service.warning_if_takes_more_than">
                    <td>Latency threshold: </td>
                    <td><span title="latency threshold: {{serviceDetails.service.warning_if_takes_more_than}} seconds" class="label label-default">{{serviceDetails.service.warning_if_takes_more_than}}</span> milliseconds</td>
                </tr>
                <tr ng-if="serviceDetails.service.expected && serviceDetails.service.expected.statuscode">
                    <td>Expected status code:</td>
                    <td>
                        <span title="ping interval: {{serviceDetails.service.expected.statuscode}} seconds" class="label label-default">{{serviceDetails.service.expected.statuscode}}</span>
                    </td>
                </tr>
                <tr ng-if="serviceDetails.service.expected && serviceDetails.service.expected.statuscode">
                    <td>Expected text:</td>
                    <td>
                        <em>{{serviceDetails.service.expected.contains}}</em>
                    </td>
                </tr>
            </table>

        </div>

    </div>

    <h3>Events</h3>
    <p>
        Showing events since
        <span am-time-ago="serviceDetails.eventsSince"></span>
    </p>

    <div class="section events row">
        <div class="col-md-6">
            <table ng-table="tableCriticalLogs" class="table-services table sorted table-striped table-condensed">
                <tbody>
                <tr ng-repeat="log in $data">
                    <td class="" data-title="'Msg'" sortable="'msg'">
                        <span ng-class="{'success':log.status==='success','error':log.status==='error'}">
                            {{log.msg}}
                        </span>
                    </td>
                    <td class="" data-title="'Timestamp'" sortable="'timestamp'">
                        <span am-time-ago="log.timestamp"></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-6">
            <table ng-table="tableWarningLogs" class="table-services table sorted table-striped table-condensed">
                <tbody>
                <tr ng-repeat="log in $data">
                    <td class="" data-title="'Msg'" sortable="'msg'">
                        <span class="warning">
                            {{log.msg}}
                        </span>
                    </td>
                    <td class="" data-title="'Timestamp'" sortable="'timestamp'">
                        <span am-time-ago="log.timestamp"></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>